{% extends "base.html" %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold text-gray-800">Calendar Management</h1>
    <a href="/dashboard" class="text-gray-600 hover:text-gray-800 text-sm">Back to Dashboard</a>
</div>

<div class="bg-white rounded-lg shadow overflow-hidden">
    <table class="min-w-full divide-y divide-gray-200">
        <thead class="bg-gray-50">
            <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Working Hours
                </th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Notes</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
            </tr>
        </thead>
        <tbody class="bg-white divide-y divide-gray-200">
            {% for day in days %}
            <tr class="{{ 'bg-gray-50' if not day.is_working else '' }}">
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                    {{ day.date.strftime('%Y-%m-%d') }} <span class="text-gray-500 font-normal">({{ day.day_name
                        }})</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm">
                    <form method="POST" action="/calendar" class="inline">
                        <input type="hidden" name="date" value="{{ day.date.strftime('%Y-%m-%d') }}">
                        <input type="hidden" name="action" value="toggle_working">
                        <button type="submit"
                            class="px-3 py-1 rounded-full text-xs font-semibold {{ 'bg-green-100 text-green-800' if day.is_working else 'bg-red-100 text-red-800' }}">
                            {{ 'Working Day' if day.is_working else 'Day Off' }}
                        </button>
                    </form>
                </td>
                <form method="POST" action="/calendar">
                    <input type="hidden" name="date" value="{{ day.date.strftime('%Y-%m-%d') }}">
                    <input type="hidden" name="action" value="update_details">
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <input type="number" step="0.5" name="hours" value="{{ day.hours }}"
                            class="w-20 border rounded px-2 py-1 {{ 'bg-gray-100' if not day.is_working else '' }}"
                            {{ 'disabled' if not day.is_working else '' }}>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                        <input type="text" name="note" value="{{ day.note }}" placeholder="Holiday name..."
                            class="w-full border rounded px-2 py-1">
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        <button type="submit" class="text-indigo-600 hover:text-indigo-900">Save</button>
                    </td>
                </form>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}